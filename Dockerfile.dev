FROM node:latest as builder

WORKDIR /angular-app

COPY angular-app/package*.json ./

RUN npm install

COPY angular-app/. .

RUN npm test -- --no-watch --reporters=default --code-coverage

RUN ng build --configuration production

FROM nginx:alpine as runner

COPY --from=builder /angular-app/dist/your-app-name /usr/share/nginx/html

